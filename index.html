<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Anniversary Love Rain</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <style>
        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            min-height: 100vh;
            width: 100%;
            overflow: hidden; /* NgƒÉn cu·ªôn trang */
        }

        body {
            background: linear-gradient(135deg, #000000 0%, #1a0033 50%, #000000 100%);
            font-family: 'Pacifico', cursive;
            position: relative;
            perspective: 1000px; /* Cho hi·ªáu ·ª©ng 3D */
        }

        /* Container cho c√°c ph·∫ßn t·ª≠ r∆°i xu·ªëng */
        .falling-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Cho ph√©p t∆∞∆°ng t√°c v·ªõi c√°c l·ªõp b√™n d∆∞·ªõi */
            transform-style: preserve-3d; /* Gi·ªØ hi·ªáu ·ª©ng 3D cho c√°c con */
        }

        /* Ki·ªÉu ch·ªØ r∆°i */
        .falling-text {
            position: absolute;
            color: #ff69b4; /* M√†u h·ªìng */
            font-weight: bold;
            white-space: nowrap; /* NgƒÉn ch·ªØ xu·ªëng d√≤ng */
            animation: fall linear forwards; /* √Åp d·ª•ng animation "fall" */
            will-change: transform, opacity; /* T·ªëi ∆∞u h√≥a hi·ªáu su·∫•t animation */
            text-shadow: 0 0 8px currentColor; /* Hi·ªáu ·ª©ng ƒë·ªï b√≥ng */
            opacity: 0.9;
            font-size: calc(0.8em + 0.5vw); /* K√≠ch th∆∞·ªõc ch·ªØ ƒë·ªông */
            max-width: 80vw;
            overflow-wrap: break-word; /* ƒê·∫£m b·∫£o ch·ªØ d√†i v·∫´n c√≥ th·ªÉ xu·ªëng d√≤ng n·∫øu c·∫ßn */
        }

        /* C√°c bi·∫øn th·ªÉ m√†u s·∫Øc cho ch·ªØ r∆°i */
        .falling-text:nth-child(2n) { color: #ff1493; } /* Deep Pink */
        .falling-text:nth-child(3n) { color: #ffc0cb; } /* Pink */
        .falling-text:nth-child(4n) { color: #da70d6; } /* Orchid */

        /* Keyframes cho animation ch·ªØ r∆°i */
        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(110vh) rotate(5deg); opacity: 0; }
        }

        /* Ki·ªÉu tr√°i tim */
        .heart {
            position: absolute;
            color: #ff4500; /* M√†u ƒë·ªè cam */
            font-size: calc(1.2em + 0.5vw); /* K√≠ch th∆∞·ªõc tr√°i tim ƒë·ªông */
            animation: heartFloat linear forwards; /* √Åp d·ª•ng animation "heartFloat" */
            will-change: transform, opacity; /* T·ªëi ∆∞u h√≥a hi·ªáu su·∫•t animation */
            text-shadow: 0 0 12px #ff4500; /* Hi·ªáu ·ª©ng ƒë·ªï b√≥ng */
        }

        /* Keyframes cho animation tr√°i tim n·ªïi l√™n */
        @keyframes heartFloat {
            0% { transform: translateY(100vh) scale(0.5) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) scale(1.2) rotate(360deg); opacity: 0; }
        }

        /* V√πng ƒëi·ªÅu khi·ªÉn ·ªü g√≥c tr√™n b√™n tr√°i */
        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ff69b4;
            font-size: 1em;
            z-index: 100; /* ƒê·∫£m b·∫£o n·∫±m tr√™n c√πng */
            text-shadow: 0 0 5px #ff69b4;
            font-family: Arial, sans-serif;
            padding: 0.5em;
            max-width: 90%;
            word-break: break-word;
        }

        /* V√πng "Tap Here" ·ªü cu·ªëi trang */
        .tap-area {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff69b4;
            font-size: 1.1em;
            text-align: center;
            animation: pulse 2s infinite; /* Hi·ªáu ·ª©ng nh·∫•p nh√°y */
            z-index: 100;
            cursor: pointer; /* Bi·∫øn con tr·ªè th√†nh b√†n tay */
            font-family: Arial, sans-serif;
            padding: 0.5em 1em;
        }

        /* Keyframes cho hi·ªáu ·ª©ng pulse */
        @keyframes pulse {
            0%, 100% { opacity: 0.7; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.05); }
        }

        /* Responsive CSS cho thi·∫øt b·ªã di ƒë·ªông */
        @media (max-width: 768px) {
            .falling-text {
                font-size: 4vw;
            }

            .heart {
                font-size: 5vw;
            }

            .controls, .tap-area {
                font-size: 3.5vw;
                text-align: center;
            }
        }

        /* ·∫®n tr√¨nh ph√°t nh·∫°c YouTube (ƒë∆∞·ª£c gi·ªØ l·∫°i trong CSS ƒë·ªÉ ƒë·∫£m b·∫£o kh√¥ng l·ªói) */
        .youtube-player {
            width: 0;
            height: 0;
            position: absolute;
            left: -9999px;
            opacity: 0; /* ƒê·∫£m b·∫£o ·∫©n ho√†n to√†n */
            pointer-events: none; /* Kh√¥ng th·ªÉ t∆∞∆°ng t√°c v·ªõi iframe ·∫©n */
        }
    </style>
</head>
<body>
    <div class="falling-container" id="container"></div>

    <div class="controls">
 üíï Tu·∫•n ‚ù§Ô∏è Tu·∫•n Anniversary
    </div>

    <div class="tap-area" onclick="createBurst()">‚ú® TAP HERE FOR MORE LOVE ‚ú®</div>

    <audio id="bgm" preload="auto" loop>
      <source src="Music/DungLamTraiTimAnhDau.mp3" type="audio/mpeg">
      Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph√°t √¢m thanh.
    </audio>

    <script>
        const messages = [
            "1 Year Anniversary", "Love u in every universe",
            "Always by my side", "Nguy·ªÖn Thanh Tu·∫•n ‚ù§Ô∏è Nguy·ªÖn Thanh Tu·∫•n",
            "Forever & Always", "My Heart ‚ù§Ô∏è",
            "Together Forever", "Love You Baby", "Y√™u em l·∫Øm √°‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è",
            "Y√™u em m√£i m√£i", "M√£i b√™n nhau", "My Love, My Destiny", "Ich liebe dich ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è"
        ];

        const container = document.getElementById('container');
        const MAX_ELEMENTS = 400;

        // L·∫•y th·∫ª audio
        const bgm = document.getElementById("bgm"); 
        let musicStarted = false; // Bi·∫øn c·ªù ƒë·ªÉ ƒë·∫£m b·∫£o nh·∫°c ch·ªâ ph√°t m·ªôt l·∫ßn

        function getRandomMessage() {
            return messages[Math.floor(Math.random() * messages.length)];
        }

        function createFallingText() {
            if (container.childNodes.length > MAX_ELEMENTS) return;
            const text = document.createElement('div');
            text.className = 'falling-text';
            text.textContent = getRandomMessage();
            text.style.left = Math.random() * (window.innerWidth - 150) + 'px';
            text.style.top = '-100px';

            const duration = 6 + Math.random() * 3;
            text.style.animationDuration = duration + 's';
            text.style.animationDelay = Math.random() * 1.5 + 's';
            text.style.transform = `rotate(${(Math.random() - 0.5) * 10}deg)`;

            container.appendChild(text);
            setTimeout(() => text.remove(), (duration + 2) * 1000);
        }

        function createHeart() {
            if (container.childNodes.length > MAX_ELEMENTS) return;
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * (window.innerWidth - 50) + 'px';
            heart.style.bottom = '-50px';

            const duration = 5 + Math.random() * 2;
            heart.style.animationDuration = duration + 's';
            heart.style.animationDelay = Math.random() * 2 + 's';

            container.appendChild(heart);
            setTimeout(() => heart.remove(), (duration + 3) * 1000);
        }

        function createBurst() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => createFallingText(), i * 100);
            }
            for (let i = 0; i < 3; i++) {
                setTimeout(() => createHeart(), i * 250);
            }
        }

        function startAnimation() {
            setInterval(() => createFallingText(), 150);
            setInterval(() => createHeart(), 1000);
            setTimeout(() => createBurst(), 500);
        }

        // H√†m c·ªë g·∫Øng ph√°t nh·∫°c khi c√≥ t∆∞∆°ng t√°c ng∆∞·ªùi d√πng
        function tryToPlayMusic() {
            if (!musicStarted) {
                // S·ª≠ d·ª•ng Promise ƒë·ªÉ b·∫Øt l·ªói n·∫øu tr√¨nh duy·ªát ch·∫∑n autoplay
                bgm.play().then(() => {
                    musicStarted = true;
                    // console.log("Music started successfully!"); // C√≥ th·ªÉ b·ªè comment ƒë·ªÉ debug
                }).catch(error => {
                    // console.log("Autoplay was prevented:", error); // C√≥ th·ªÉ b·ªè comment ƒë·ªÉ debug
                    // ·ªû ƒë√¢y b·∫°n c√≥ th·ªÉ th√™m logic ƒë·ªÉ th√¥ng b√°o cho ng∆∞·ªùi d√πng
                    // v√≠ d·ª•: "Vui l√≤ng nh·∫•p v√†o b·∫•t k·ª≥ ƒë√¢u tr√™n m√†n h√¨nh ƒë·ªÉ b·∫≠t nh·∫°c!"
                });
            }
        }

        // --- G·∫ÆN S·ª∞ KI·ªÜN K√çCH HO·∫†T NH·∫†C KHI C√ì T∆Ø∆†NG T√ÅC NG∆Ø·ªúI D√ôNG ---
        // G·∫Øn s·ª± ki·ªán l·∫Øng nghe t∆∞∆°ng t√°c ng∆∞·ªùi d√πng v√†o to√†n b·ªô document
        // S·ª≠ d·ª•ng `{ once: true }` ƒë·ªÉ h√†m ch·ªâ ƒë∆∞·ª£c g·ªçi m·ªôt l·∫ßn duy nh·∫•t khi c√≥ t∆∞∆°ng t√°c ƒë·∫ßu ti√™n
        document.addEventListener('click', tryToPlayMusic, { once: true });
        document.addEventListener('touchstart', tryToPlayMusic, { once: true });
        document.addEventListener('keydown', tryToPlayMusic, { once: true });

        // C√°c event listener ri√™ng bi·ªát c·ªßa b·∫°n cho hi·ªáu ·ª©ng t·∫°o text/heart v·∫´n gi·ªØ nguy√™n
        // v√† s·∫Ω ƒë∆∞·ª£c k√≠ch ho·∫°t m·ªói khi c√≥ click/touch/keydown sau khi nh·∫°c ƒë√£ ƒë∆∞·ª£c th·ª≠ ph√°t.
        document.addEventListener('click', (e) => {
            // Ch·ªâ t·∫°o hi·ªáu ·ª©ng text/heart n·∫øu kh√¥ng ph·∫£i click v√†o v√πng tap-area
            if (!e.target.classList.contains('tap-area')) {
                createFallingText();
                if (Math.random() > 0.7) createHeart();
            }
        });

        document.addEventListener('touchstart', () => {
            createBurst();
        });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault(); // NgƒÉn cu·ªôn trang khi nh·∫•n Space
                createBurst();
            }
        });

        // Hi·ªáu ·ª©ng Parallax khi di chuy·ªÉn chu·ªôt
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 40;
            const y = (e.clientY / window.innerHeight - 0.5) * 20;
            container.style.transform = `rotateY(${x}deg) rotateX(${-y}deg)`;
        });

        // B·∫Øt ƒë·∫ßu animation khi t·∫£i trang
        startAnimation();
    </script>
</body>
</html>
